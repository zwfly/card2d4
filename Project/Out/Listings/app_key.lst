C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE APP_KEY
OBJECT MODULE PLACED IN .\Out\Objects\app_key.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\App\src\app_key.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common\inc
                    -;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_160000) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\app_key.lst) OBJEC
                    -T(.\Out\Objects\app_key.obj)

line level    source

   1          /*
   2           * app_key.c
   3           *
   4           *  Created on: 2017年7月7日
   5           *      Author: admin
   6           */
   7          
   8          #include "app.h"
   9          
  10          //static idata uint8_t buf[PAYLOAD_WIDTH] = {0};
  11          #if 0
              void app_key_init(void) {
              
              }
              
              void app_power_on(void) {
                      SW_Reset();  //复位
              }
              void app_power_off(void) {
              //      lcd_bright_off();
                      LCD_Clear_All();
              }
              #endif
  24          
  25          void app_key_pro(uint8_t keyCode) {
  26   1              uint8_t index = 0;
  27   1              uint8_t i = 0;
  28   1      
  29   1              index = 0;
  30   1              memset(sendBuf, 0, PAYLOAD_WIDTH);
  31   1              switch (keyCode) {
  32   2              case KEY_UP_K1:   // power short
  33   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  34   2                      sendBuf[index++] = 0x01;
  35   2                      sendBuf[index++] = 0;
  36   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  37   3                              sendBuf[index] += sendBuf[i + 1];
  38   3                      }
  39   2                      break;
  40   2              case KEY_DOWN_K1:
  41   2      
  42   2                      break;
  43   2              case KEY_LONG_K1:   //power long
  44   2      
  45   2                      break;
  46   2              case KEY_UP_K2:   //play/pause
  47   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  48   2                      sendBuf[index++] = 0x01;
  49   2                      sendBuf[index++] = 0;
  50   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  51   3                              sendBuf[index] += sendBuf[i + 1];
  52   3                      }
  53   2                      break;
C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 2   

  54   2              case KEY_DOWN_K2:
  55   2      
  56   2                      break;
  57   2              case KEY_LONG_K2:
  58   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  59   2                      sendBuf[index++] = 0x01;
  60   2                      sendBuf[index++] = 0;
  61   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  62   3                              sendBuf[index] += sendBuf[i + 1];
  63   3                      }
  64   2                      break;
  65   2              case KEY_UP_K3:   // down
  66   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  67   2                      sendBuf[index++] = 0x01;
  68   2                      sendBuf[index++] = 0;
  69   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  70   3                              sendBuf[index] += sendBuf[i + 1];
  71   3                      }
  72   2                      break;
  73   2              case KEY_DOWN_K3:
  74   2      
  75   2                      break;
  76   2              case KEY_LONG_K3:
  77   2      
  78   2                      break;
  79   2              case KEY_UP_K4:   // up
  80   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  81   2                      sendBuf[index++] = 0x01;
  82   2                      sendBuf[index++] = 0;
  83   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  84   3                              sendBuf[index] += sendBuf[i + 1];
  85   3                      }
  86   2                      break;
  87   2              case KEY_DOWN_K4:  // 连发
  88   2      
  89   2                      break;
  90   2              case KEY_LONG_K4:
  91   2      
  92   2                      break;
  93   2              case KEY_UP_K5:   //vol+
  94   2                      sendBuf[index++] = LCD2LAMP_HEADER;
  95   2                      sendBuf[index++] = 0x01;
  96   2                      sendBuf[index++] = 0;
  97   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
  98   3                              sendBuf[index] += sendBuf[i + 1];
  99   3                      }
 100   2                      break;
 101   2              case KEY_DOWN_K5:
 102   2      
 103   2                      break;
 104   2              case KEY_LONG_K5:
 105   2      
 106   2                      break;
 107   2              case KEY_UP_K6:   //ACC  继电器
 108   2                      sendBuf[index++] = LCD2LAMP_HEADER;
 109   2                      sendBuf[index++] = 0x02;
 110   2                      sendBuf[index++] = 0;
 111   2                      sendBuf[index++] = 0x03;
 112   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
 113   3                              sendBuf[index] += sendBuf[i + 1];
 114   3                      }
 115   2                      break;
C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 3   

 116   2              case KEY_DOWN_K6:
 117   2      
 118   2                      break;
 119   2              case KEY_LONG_K6:
 120   2      
 121   2                      break;
 122   2              case KEY_UP_K7:   // vol-
 123   2                      sendBuf[index++] = LCD2LAMP_HEADER;
 124   2                      sendBuf[index++] = 0x01;
 125   2                      sendBuf[index++] = 0;
 126   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
 127   3                              sendBuf[index] += sendBuf[i + 1];
 128   3                      }
 129   2                      break;
 130   2              case KEY_DOWN_K7:
 131   2      
 132   2                      break;
 133   2              case KEY_LONG_K7:
 134   2      
 135   2                      break;
 136   2              case KEY_UP_K8:   // mode
 137   2                      sendBuf[index++] = LCD2LAMP_HEADER;
 138   2                      sendBuf[index++] = 0x01;
 139   2                      sendBuf[index++] = KEY_MODE_CMD;
 140   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
 141   3                              sendBuf[index] += sendBuf[i + 1];
 142   3                      }
 143   2                      break;
 144   2              case KEY_DOWN_K8:
 145   2      
 146   2                      break;
 147   2              case KEY_LONG_K8:
 148   2      
 149   2                      break;
 150   2              case KEY_UP_K9:   // dome
 151   2                      sendBuf[index++] = LCD2LAMP_HEADER;
 152   2                      sendBuf[index++] = 0x01;
 153   2                      sendBuf[index++] = 0;
 154   2                      for (i = 0; i < (sendBuf[1] + 1); i++) {
 155   3                              sendBuf[index] += sendBuf[i + 1];
 156   3                      }
 157   2                      break;
 158   2              case KEY_DOWN_K9:
 159   2      
 160   2                      break;
 161   2              case KEY_LONG_K9:
 162   2      
 163   2                      break;
 164   2              case KEY_UP_K10:   //
 165   2      
 166   2                      break;
 167   2              case KEY_DOWN_K10:
 168   2      
 169   2                      break;
 170   2              case KEY_LONG_K10:
 171   2      
 172   2                      break;
 173   2              case KEY_UP_K11:   //
 174   2      
 175   2                      break;
 176   2              case KEY_DOWN_K11:
 177   2      
C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 4   

 178   2                      break;
 179   2              case KEY_LONG_K11:
 180   2      
 181   2                      break;
 182   2              case KEY_UP_K12:   //
 183   2      
 184   2                      break;
 185   2              case KEY_DOWN_K12:
 186   2      
 187   2                      break;
 188   2              case KEY_LONG_K12:
 189   2      
 190   2                      break;
 191   2              case KEY_UP_K13:   //
 192   2      
 193   2                      break;
 194   2              case KEY_DOWN_K13:
 195   2      
 196   2                      break;
 197   2              case KEY_LONG_K13:
 198   2      
 199   2                      break;
 200   2              case KEY_UP_K14:   //
 201   2      
 202   2                      break;
 203   2              case KEY_DOWN_K14:
 204   2      
 205   2                      break;
 206   2              case KEY_LONG_K14:
 207   2      
 208   2                      break;
 209   2              case KEY_UP_K15:   //
 210   2      
 211   2                      break;
 212   2              case KEY_DOWN_K15:
 213   2      
 214   2                      break;
 215   2              case KEY_LONG_K15:
 216   2      
 217   2                      break;
 218   2              case KEY_UP_K16:   //
 219   2      
 220   2                      break;
 221   2              case KEY_DOWN_K16:
 222   2      
 223   2                      break;
 224   2              case KEY_LONG_K16:
 225   2      
 226   2                      break;
 227   2              case KEY_UP_K17:   //
 228   2      
 229   2                      break;
 230   2              case KEY_DOWN_K17:
 231   2      
 232   2                      break;
 233   2              case KEY_LONG_K17:
 234   2      
 235   2                      break;
 236   2              case KEY_UP_K18:   //
 237   2      
 238   2                      break;
 239   2              case KEY_DOWN_K18:
C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 5   

 240   2      
 241   2                      break;
 242   2              case KEY_LONG_K18:
 243   2      
 244   2                      break;
 245   2              case KEY_UP_K19:   //
 246   2      
 247   2                      break;
 248   2              case KEY_DOWN_K19:
 249   2      
 250   2                      break;
 251   2              case KEY_LONG_K19:
 252   2      
 253   2                      break;
 254   2              case KEY_UP_K20:   //
 255   2      
 256   2                      break;
 257   2              case KEY_DOWN_K20:
 258   2      
 259   2                      break;
 260   2              case KEY_LONG_K20:
 261   2      
 262   2                      break;
 263   2              case KEY_UP_K21:   //
 264   2      
 265   2                      break;
 266   2              case KEY_DOWN_K21:
 267   2      
 268   2                      break;
 269   2              case KEY_LONG_K21:
 270   2      
 271   2                      break;
 272   2              case KEY_UP_K22:   //
 273   2      
 274   2                      break;
 275   2              case KEY_DOWN_K22:
 276   2      
 277   2                      break;
 278   2              case KEY_LONG_K22:
 279   2      
 280   2                      break;
 281   2              case KEY_UP_K23:   //
 282   2      
 283   2                      break;
 284   2              case KEY_DOWN_K23:
 285   2      
 286   2                      break;
 287   2              case KEY_LONG_K23:
 288   2      
 289   2                      break;
 290   2              case KEY_UP_K24:   //
 291   2      
 292   2                      break;
 293   2              case KEY_DOWN_K24:
 294   2      
 295   2                      break;
 296   2              case KEY_LONG_K24:
 297   2      
 298   2                      break;
 299   2              default:
 300   2      
 301   2                      break;
C51 COMPILER V9.56.0.0   APP_KEY                                                           11/12/2017 23:51:34 PAGE 6   

 302   2              }
 303   1              if (index) {
 304   2                      index++;
 305   2                      app_2d4_send(sendBuf, index);
 306   2              }
 307   1      
 308   1      }
 309          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1450    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       3
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
